<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Thinkphp 3.2.3 redis缓存 | 00天火00</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="referrer" content="no-referrer"/>

  <meta name="description" content="说明好像是tp3.2的bug,自带的redis驱动不是那么好用。。。找了方法修改优化了一下，亲测可用。   确认已经安装了redis服务器 确认php中已经安装了redis扩展 TP版本：thinkphp_3.2.3_full.zip">
<meta property="og:type" content="article">
<meta property="og:title" content="Thinkphp 3.2.3 redis缓存">
<meta property="og:url" content="https://blog.thuol.com/2017/03/14/20170314_Thinkphp%203.2.3%20redis%E7%BC%93%E5%AD%98/index.html">
<meta property="og:site_name" content="00天火00">
<meta property="og:description" content="说明好像是tp3.2的bug,自带的redis驱动不是那么好用。。。找了方法修改优化了一下，亲测可用。   确认已经安装了redis服务器 确认php中已经安装了redis扩展 TP版本：thinkphp_3.2.3_full.zip">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/4830242-dd5dbf2fbf13fe47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/4830242-e772a2b5cd90a2fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/4830242-1f72a0c871023542.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/4830242-7927704807933170.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="article:published_time" content="2017-03-14T03:56:00.000Z">
<meta property="article:modified_time" content="2020-04-13T14:51:42.243Z">
<meta property="article:author" content="00天火00">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/4830242-dd5dbf2fbf13fe47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
  
  
    <link rel="icon" href="/favicon.png">
  
  

  
  
<link rel="stylesheet" href="/css/style.css">

  <script src="https://cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>
  <script async src="/busuanzi.pure.mini.js?123"></script>
  <script async src="/thuol.js?12"></script>
  <link href="/thuol.css" rel="stylesheet">
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">00天火00</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">人生不相见,动如参与商</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">主页</a>
        
          <a class="main-nav-link" href="/archives">文章</a>
        
          <a class="main-nav-link" href="/explain">说明</a>
        
          <a class="main-nav-link" href="/photo">摄影</a>
        
          <a class="main-nav-link" href="/about">关于</a>
        
      </nav>
      <nav id="sub-nav">
        
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blog.thuol.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-20170314_Thinkphp 3.2.3 redis缓存" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">

    
        <!-- 不蒜子统计 -->
        <span id="busuanzi_container_page_pv" style='display:none' class="article-date">
              <i class="icon-smile icon"></i> 阅读数：<span id="busuanzi_value_page_pv"></span>次
        </span>


<a href="/2017/03/14/20170314_Thinkphp%203.2.3%20redis%E7%BC%93%E5%AD%98/" class="article-date">
  <time datetime="2017-03-14T03:56:00.000Z" itemprop="datePublished">2017-03-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/PHP/">PHP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Thinkphp 3.2.3 redis缓存
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>好像是tp3.2的bug,自带的redis驱动不是那么好用。。。找了方法修改优化了一下，亲测可用。</p>
<blockquote>
<ol>
<li>确认已经安装了redis服务器</li>
<li>确认php中已经安装了redis扩展</li>
<li>TP版本：thinkphp_3.2.3_full.zip</li>
</ol>
</blockquote>
<a id="more"></a>
<h1 id="S缓存使用redis"><a href="#S缓存使用redis" class="headerlink" title="S缓存使用redis"></a>S缓存使用redis</h1><p>复制以下内容到文本中，改名为Redis.class.php。<br>替换ThinkPHP\Library\Think\Cache\Driver\Redis.class.php<em>（注意先备份）</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line">&#x2F;&#x2F; | ThinkPHP [ WE CAN DO IT JUST THINK IT ]</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line">&#x2F;&#x2F; | Copyright (c) 2006-2013 http:&#x2F;&#x2F;thinkphp.cn All rights reserved.</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line">&#x2F;&#x2F; | Licensed ( http:&#x2F;&#x2F;www.apache.org&#x2F;licenses&#x2F;LICENSE-2.0 )</span><br><span class="line">&#x2F;&#x2F; +----------------------------------------------------------------------</span><br><span class="line">namespace Think\Cache\Driver;</span><br><span class="line">use Think\Cache;</span><br><span class="line">defined(&#39;THINK_PATH&#39;) or exit();</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Redis缓存驱动</span><br><span class="line"> *&#x2F;</span><br><span class="line">class Redis extends Cache &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 架构函数</span><br><span class="line">     * @param array $options 缓存参数</span><br><span class="line">     * @access public</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public function __construct($options&#x3D;array()) &#123;</span><br><span class="line">        if ( !extension_loaded(&#39;redis&#39;) ) &#123;</span><br><span class="line">            E(L(&#39;_NOT_SUPPERT_&#39;).&#39;:redis&#39;);</span><br><span class="line">        &#125;</span><br><span class="line">        if(empty($options)) &#123;</span><br><span class="line">            $options &#x3D; array (</span><br><span class="line">                &#39;host&#39;          &#x3D;&gt; C(&#39;REDIS_HOST&#39;) ? C(&#39;REDIS_HOST&#39;) : &#39;127.0.0.1&#39;,</span><br><span class="line">                &#39;port&#39;          &#x3D;&gt; C(&#39;REDIS_PORT&#39;) ? C(&#39;REDIS_PORT&#39;) : 6379,</span><br><span class="line">                &#39;timeout&#39;       &#x3D;&gt; C(&#39;REDIS_TIMEOUT&#39;) ? C(&#39;REDIS_TIMEOUT&#39;) : false,</span><br><span class="line">                &#39;auth&#39;		&#x3D;&gt; C(&#39;REDIS_AUTH&#39;) ? C(&#39;REDIS_AUTH&#39;):null,&#x2F;&#x2F;auth认证</span><br><span class="line">                &#39;persistent&#39;    &#x3D;&gt; C(&#39;REDIS_PERSISTENT&#39;) ? C(&#39;REDIS_PERSISTENT&#39;) : false,</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        $this-&gt;options &#x3D;  $options;</span><br><span class="line">        $this-&gt;options[&#39;expire&#39;] &#x3D;  isset($options[&#39;expire&#39;])?  $options[&#39;expire&#39;]  :   C(&#39;DATA_CACHE_TIME&#39;);</span><br><span class="line">        $this-&gt;options[&#39;prefix&#39;] &#x3D;  isset($options[&#39;prefix&#39;])?  $options[&#39;prefix&#39;]  :   C(&#39;DATA_CACHE_PREFIX&#39;);</span><br><span class="line">        $this-&gt;options[&#39;length&#39;] &#x3D;  isset($options[&#39;length&#39;])?  $options[&#39;length&#39;]  :   0;</span><br><span class="line">        $func &#x3D; $options[&#39;persistent&#39;] ? &#39;pconnect&#39; : &#39;connect&#39;;</span><br><span class="line">        $this-&gt;handler  &#x3D; new \Redis;</span><br><span class="line">        $options[&#39;timeout&#39;] &#x3D;&#x3D;&#x3D; false ?</span><br><span class="line">            $this-&gt;handler-&gt;$func($options[&#39;host&#39;], $options[&#39;port&#39;]) :</span><br><span class="line">            $this-&gt;handler-&gt;$func($options[&#39;host&#39;], $options[&#39;port&#39;], $options[&#39;timeout&#39;]);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;Auth参数</span><br><span class="line">        if($this-&gt;options[&#39;auth&#39;]!&#x3D;null)</span><br><span class="line">        &#123;</span><br><span class="line">            $this-&gt;handler-&gt;auth($this-&gt;options[&#39;auth&#39;]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 读取缓存</span><br><span class="line">     * @access public</span><br><span class="line">     * @param string $name 缓存变量名</span><br><span class="line">     * @return mixed</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public function get($name) &#123;</span><br><span class="line">        N(&#39;cache_read&#39;,1);</span><br><span class="line">        $value &#x3D; $this-&gt;handler-&gt;get($this-&gt;options[&#39;prefix&#39;].$name);</span><br><span class="line">        $jsonData  &#x3D; json_decode( $value, true );</span><br><span class="line">        return ($jsonData &#x3D;&#x3D;&#x3D; NULL) ? $value : $jsonData;	&#x2F;&#x2F;检测是否为JSON数据 true 返回JSON解析数组, false返回源数据</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 写入缓存</span><br><span class="line">     * @access public</span><br><span class="line">     * @param string $name 缓存变量名</span><br><span class="line">     * @param mixed $value  存储数据</span><br><span class="line">     * @param integer $expire  有效时间（秒）</span><br><span class="line">     * @return boolean</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public function set($name, $value, $expire &#x3D; null) &#123;</span><br><span class="line">        N(&#39;cache_write&#39;,1);</span><br><span class="line">        if(is_null($expire)) &#123;</span><br><span class="line">            $expire  &#x3D;  $this-&gt;options[&#39;expire&#39;];</span><br><span class="line">        &#125;</span><br><span class="line">        $name   &#x3D;   $this-&gt;options[&#39;prefix&#39;].$name;</span><br><span class="line">        &#x2F;&#x2F;对数组&#x2F;对象数据进行缓存处理，保证数据完整性</span><br><span class="line">        $value  &#x3D;  (is_object($value) || is_array($value)) ? json_encode($value) : $value;</span><br><span class="line">        if(is_int($expire)) &#123;</span><br><span class="line">            $result &#x3D; $this-&gt;handler-&gt;setex($name, $expire, $value);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            $result &#x3D; $this-&gt;handler-&gt;set($name, $value);</span><br><span class="line">        &#125;</span><br><span class="line">        if($result &amp;&amp; $this-&gt;options[&#39;length&#39;]&gt;0) &#123;</span><br><span class="line">            &#x2F;&#x2F; 记录缓存队列</span><br><span class="line">            $this-&gt;queue($name);</span><br><span class="line">        &#125;</span><br><span class="line">        return $result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 删除缓存</span><br><span class="line">     * @access public</span><br><span class="line">     * @param string $name 缓存变量名</span><br><span class="line">     * @return boolean</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public function rm($name) &#123;</span><br><span class="line">        return $this-&gt;handler-&gt;delete($this-&gt;options[&#39;prefix&#39;].$name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 清除缓存</span><br><span class="line">     * @access public</span><br><span class="line">     * @return boolean</span><br><span class="line">     *&#x2F;</span><br><span class="line">    public function clear() &#123;</span><br><span class="line">        return $this-&gt;handler-&gt;flushDB();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/4830242-dd5dbf2fbf13fe47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h1 id="SESSION使用redis"><a href="#SESSION使用redis" class="headerlink" title="SESSION使用redis"></a>SESSION使用redis</h1><p>复制以下内容到文本中，改名为Redis.class.php。<br>复制到ThinkPHP\Library\Think\Session\Driver\Redis.class.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> *  +----------------------------------------------------------------------</span><br><span class="line"> *  | ThinkPHP [ WE CAN DO IT JUST THINK IT ]</span><br><span class="line"> *  +----------------------------------------------------------------------</span><br><span class="line"> *  | Copyright (c) 2006-2013 http:&#x2F;&#x2F;thinkphp.cn All rights reserved.</span><br><span class="line"> *  +----------------------------------------------------------------------</span><br><span class="line"> *  | Licensed ( http:&#x2F;&#x2F;www.apache.org&#x2F;licenses&#x2F;LICENSE-2.0 )</span><br><span class="line"> *  +---------------------------------------------------------------------- </span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">namespace Think\Session\Driver;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Redis Session驱动 </span><br><span class="line"> *&#x2F;</span><br><span class="line">class Redis &#123;</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * Redis句柄</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	private $handler;</span><br><span class="line">	private $get_result;</span><br><span class="line"></span><br><span class="line">	public function __construct()&#123;</span><br><span class="line">		if ( !extension_loaded(&#39;redis&#39;) ) &#123;</span><br><span class="line">            E(L(&#39;_NOT_SUPPERT_&#39;).&#39;:redis&#39;);</span><br><span class="line">        &#125;</span><br><span class="line">        if(empty($options)) &#123;</span><br><span class="line">            $options &#x3D; array (</span><br><span class="line">                &#39;host&#39;          &#x3D;&gt; C(&#39;REDIS_HOST&#39;) ? C(&#39;REDIS_HOST&#39;) : &#39;127.0.0.1&#39;,</span><br><span class="line">                &#39;port&#39;          &#x3D;&gt; C(&#39;REDIS_PORT&#39;) ? C(&#39;REDIS_PORT&#39;) : 6379,</span><br><span class="line">                &#39;timeout&#39;       &#x3D;&gt; C(&#39;REDIS_TIMEOUT&#39;) ? C(&#39;REDIS_TIMEOUT&#39;) : false,</span><br><span class="line">                &#39;persistent&#39;    &#x3D;&gt; C(&#39;REDIS_PERSISTENT&#39;) ? C(&#39;REDIS_PERSISTENT&#39;) : false,</span><br><span class="line">		&#39;auth&#39;		&#x3D;&gt; C(&#39;REDIS_AUTH&#39;) ? C(&#39;REDIS_AUTH&#39;) : false,</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">		$options[&#39;host&#39;] &#x3D; explode(&#39;,&#39;, $options[&#39;host&#39;]);</span><br><span class="line">		$options[&#39;port&#39;] &#x3D; explode(&#39;,&#39;, $options[&#39;port&#39;]);</span><br><span class="line">		$options[&#39;auth&#39;] &#x3D; explode(&#39;,&#39;, $options[&#39;auth&#39;]);</span><br><span class="line">		foreach ($options[&#39;host&#39;] as $key&#x3D;&gt;$value) &#123;</span><br><span class="line">			if (!isset($options[&#39;port&#39;][$key])) &#123;</span><br><span class="line">				$options[&#39;port&#39;][$key] &#x3D; $options[&#39;port&#39;][0];</span><br><span class="line">			&#125;</span><br><span class="line">			if (!isset($options[&#39;auth&#39;][$key])) &#123;</span><br><span class="line">				$options[&#39;auth&#39;][$key] &#x3D; $options[&#39;auth&#39;][0];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">        $this-&gt;options &#x3D;  $options;</span><br><span class="line">	$expire &#x3D; C(&#39;SESSION_EXPIRE&#39;);</span><br><span class="line">        $this-&gt;options[&#39;expire&#39;] &#x3D;  isset($expire) ? (int)$expire : (int)ini_get(&#39;session.gc_maxlifetime&#39;);;</span><br><span class="line">        $this-&gt;options[&#39;prefix&#39;] &#x3D;  isset($options[&#39;prefix&#39;]) ?  $options[&#39;prefix&#39;]  :   C(&#39;SESSION_PREFIX&#39;);</span><br><span class="line">        $this-&gt;handler  &#x3D; new \Redis;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	 * 连接Redis服务端</span><br><span class="line">	 * @access public</span><br><span class="line">	 * @param bool $is_master : 是否连接主服务器</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function connect($is_master &#x3D; true) &#123;</span><br><span class="line">		if ($is_master) &#123;</span><br><span class="line">			$i &#x3D; 0;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			$count &#x3D; count($this-&gt;options[&#39;host&#39;]);</span><br><span class="line">			if ($count &#x3D;&#x3D; 1) &#123;</span><br><span class="line">				$i &#x3D; 0;</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				$i &#x3D; rand(1, $count - 1);	&#x2F;&#x2F;多个从服务器随机选择</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		$func &#x3D; $this-&gt;options[&#39;persistent&#39;] ? &#39;pconnect&#39; : &#39;connect&#39;;</span><br><span class="line">		try &#123;</span><br><span class="line">			if ($this-&gt;options[&#39;timeout&#39;] &#x3D;&#x3D;&#x3D; false) &#123;</span><br><span class="line">				$result &#x3D; $this-&gt;handler-&gt;$func($this-&gt;options[&#39;host&#39;][$i], $this-&gt;options[&#39;port&#39;][$i]);</span><br><span class="line">				if (!$result)</span><br><span class="line">					throw new \Think\Exception(&#39;Redis Error&#39;, 100);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				$result &#x3D; $this-&gt;handler-&gt;$func($this-&gt;options[&#39;host&#39;][$i], $this-&gt;options[&#39;port&#39;][$i], $this-&gt;options[&#39;timeout&#39;]);</span><br><span class="line">				if (!$result)</span><br><span class="line">					throw new \Think\Exception(&#39;Redis Error&#39;, 101);</span><br><span class="line">			&#125;</span><br><span class="line">			if ($this-&gt;options[&#39;auth&#39;][$i]) &#123;</span><br><span class="line">				$result &#x3D; $this-&gt;handler-&gt;auth($this-&gt;options[&#39;auth&#39;][$i]);</span><br><span class="line">				if (!$result) &#123;</span><br><span class="line">					throw new \Think\Exception(&#39;Redis Error&#39;, 102);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; catch ( \Exception $e ) &#123;</span><br><span class="line">			exit(&#39;Error Message:&#39;.$e-&gt;getMessage().&#39;&lt;br&gt;Error Code:&#39;.$e-&gt;getCode().&#39;&#39;);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * 打开Session </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @param string $savePath </span><br><span class="line">	 * @param mixed $sessName  </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function open($savePath, $sessName) &#123;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * 关闭Session </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function close() &#123;</span><br><span class="line">		if ($this-&gt;options[&#39;persistent&#39;] &#x3D;&#x3D; &#39;pconnect&#39;) &#123;</span><br><span class="line">			$this-&gt;handler-&gt;close();</span><br><span class="line">		&#125;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * 读取Session </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @param string $sessID </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function read($sessID) &#123;</span><br><span class="line">		$this-&gt;connect(0);</span><br><span class="line">		$this-&gt;get_result &#x3D; $this-&gt;handler-&gt;get($this-&gt;options[&#39;prefix&#39;].$sessID);</span><br><span class="line">        &#x2F;&#x2F;延长有效期</span><br><span class="line">        $this-&gt;handler-&gt;expire($this-&gt;options[&#39;prefix&#39;].$sessID,C(&#39;SESSION_EXPIRE&#39;));</span><br><span class="line">        return $this-&gt;get_result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * 写入Session </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @param string $sessID </span><br><span class="line">	 * @param String $sessData  </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function write($sessID, $sessData) &#123;</span><br><span class="line">		if (!$sessData || $sessData &#x3D;&#x3D; $this-&gt;get_result) &#123;</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line">		$this-&gt;connect(1);</span><br><span class="line">        $expire  &#x3D;  $this-&gt;options[&#39;expire&#39;];</span><br><span class="line">        $sessID   &#x3D;   $this-&gt;options[&#39;prefix&#39;].$sessID;</span><br><span class="line">        if(is_int($expire) &amp;&amp; $expire &gt; 0) &#123;</span><br><span class="line">            $result &#x3D; $this-&gt;handler-&gt;setex($sessID, $expire, $sessData);</span><br><span class="line">			$re &#x3D; $result ? &#39;true&#39; : &#39;false&#39;;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            $result &#x3D; $this-&gt;handler-&gt;set($sessID, $sessData);</span><br><span class="line">			$re &#x3D; $result ? &#39;true&#39; : &#39;false&#39;;</span><br><span class="line">        &#125;</span><br><span class="line">        return $result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * 删除Session </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @param string $sessID </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function destroy($sessID) &#123;</span><br><span class="line">		$this-&gt;connect(1);</span><br><span class="line">        return $this-&gt;handler-&gt;delete($this-&gt;options[&#39;prefix&#39;].$sessID);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * Session 垃圾回收</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @param string $sessMaxLifeTime </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function gc($sessMaxLifeTime) &#123;</span><br><span class="line">		return true;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	&#x2F;**</span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * 打开Session </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @access public </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 * @param string $savePath </span><br><span class="line">	 * @param mixed $sessName  </span><br><span class="line">	  +----------------------------------------------------------</span><br><span class="line">	 *&#x2F;</span><br><span class="line">	public function execute() &#123;</span><br><span class="line">		session_set_save_handler(</span><br><span class="line">				array(&amp;$this, &quot;open&quot;),</span><br><span class="line">				array(&amp;$this, &quot;close&quot;),</span><br><span class="line">				array(&amp;$this, &quot;read&quot;),</span><br><span class="line">				array(&amp;$this, &quot;write&quot;),</span><br><span class="line">				array(&amp;$this, &quot;destroy&quot;),</span><br><span class="line">				array(&amp;$this, &quot;gc&quot;)</span><br><span class="line">		);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	public function __destruct() &#123;</span><br><span class="line">		if ($this-&gt;options[&#39;persistent&#39;] &#x3D;&#x3D; &#39;pconnect&#39;) &#123;</span><br><span class="line">			$this-&gt;handler-&gt;close();</span><br><span class="line">		&#125;</span><br><span class="line">		session_write_close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/4830242-e772a2b5cd90a2fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h1 id="config-配置"><a href="#config-配置" class="headerlink" title="config 配置"></a>config 配置</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;SESSION 配置</span><br><span class="line">&#39;SESSION_AUTO_START&#39; &#x3D;&gt; true, &#x2F;&#x2F;是否开启session</span><br><span class="line">&#39;SESSION_TYPE&#39;          &#x3D;&gt;  &#39;Redis&#39;,    &#x2F;&#x2F;session 驱动</span><br><span class="line">&#39;SESSION_PREFIX&#39;        &#x3D;&gt;  &#39;sess_&#39;,    &#x2F;&#x2F;session前缀</span><br><span class="line">&#39;SESSION_EXPIRE&#39;        &#x3D;&gt;  &#39;7200&#39;,        &#x2F;&#x2F;session有效期(单位:秒) 0表示永久缓存，当session被访问时，时间重新计算。</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;缓存 配置</span><br><span class="line">&#39;DATA_CACHE_TYPE&#39;&#x3D;&gt;&#39;Redis&#39;,&#x2F;&#x2F;默认动态缓存为Redis</span><br><span class="line">&#39;DATA_CACHE_PREFIX&#39; &#x3D;&gt; &#39;Redis_&#39;,&#x2F;&#x2F;缓存前缀</span><br><span class="line">&#39;DATA_CACHE_TIME&#39;       &#x3D;&gt;  &#39;0&#39;,    &#x2F;&#x2F;缓存时间 0为永久 当缓存被访问时，时间不重新计算</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;Redis 配置</span><br><span class="line">&#39;REDIS_RW_SEPARATE&#39; &#x3D;&gt; true, &#x2F;&#x2F;Redis读写分离 true 开启</span><br><span class="line">&#39;REDIS_HOST&#39;&#x3D;&gt;&#39;127.0.0.1&#39;, &#x2F;&#x2F;redis服务器ip，多台用逗号隔开；读写分离开启时，第一台负责写，其它[随机]负责读；</span><br><span class="line">&#39;REDIS_PORT&#39;&#x3D;&gt;&#39;6379&#39;,&#x2F;&#x2F;端口号</span><br><span class="line">&#39;REDIS_TIMEOUT&#39;&#x3D;&gt;&#39;30&#39;,&#x2F;&#x2F;超时时间(秒)</span><br><span class="line">&#39;REDIS_PERSISTENT&#39;&#x3D;&gt;false,&#x2F;&#x2F;是否长连接 false&#x3D;短连接</span><br><span class="line">&#39;REDIS_AUTH&#39;&#x3D;&gt;&#39;123456&#39;,&#x2F;&#x2F;AUTH认证密码</span><br></pre></td></tr></table></figure>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public function index()&#123;</span><br><span class="line">        $test[&#39;a&#39;]&#x3D;&#39;123&#39;;</span><br><span class="line">        $test[&#39;b&#39;]&#x3D;&#39;1234&#39;;</span><br><span class="line">        $test[&#39;c&#39;][&#39;a&#39;]&#x3D;&#39;ca123&#39;;</span><br><span class="line">        $test[&#39;c&#39;][&#39;b&#39;]&#x3D;&#39;cb123&#39;;</span><br><span class="line">        </span><br><span class="line">        S(&#39;test&#39;,$test);</span><br><span class="line">        $_SESSION[&#39;test&#39;]&#x3D;$test;</span><br><span class="line">        </span><br><span class="line">        echo &quot;S缓存:&lt;&#x2F; br&gt;&quot;;</span><br><span class="line">        dump(S(&#39;test&#39;));</span><br><span class="line">        echo &quot;SESSION:&lt;&#x2F; br&gt;&quot;;</span><br><span class="line">        dump($_SESSION[&#39;test&#39;]);</span><br><span class="line"></span><br><span class="line">        exit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/4830242-1f72a0c871023542.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>使用redis管理工具查看<br><img src="http://upload-images.jianshu.io/upload_images/4830242-7927704807933170.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>

      
    </div>
    <footer class="article-footer">
    
    <div class="is_appreciation">
        <a href="http://blogthuol.thuolm.com/appreciation.png?imageView2/2/w/600/q/80" target="_blank" title="请我喝杯咖啡吧(^_^)" class="fancybox" rel="article0 noopener">觉得不错，打赏一下(^_^)</a>
    </div>
    
      <a data-url="https://blog.thuol.com/2017/03/14/20170314_Thinkphp%203.2.3%20redis%E7%BC%93%E5%AD%98/" data-id="ck8ym72wj000kikh883nnhz28" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/03/14/20170314_Thinkphp%203.2.3%20Mongodb%E9%85%8D%E7%BD%AE/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">
        
          Thinkphp 3.2.3 Mongodb配置
        
      </div>
    </a>
  
  
    <a href="/2017/03/09/20170309_Redis%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">Redis基础配置</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <div class="widget myinfo">
        <div class="my_name">00天火00</div>
        <div class="my_email">tianhuo@thuol.com</div>
        <div class="my_logo"><img src="/logo.png" alt=""></div>
        <div class="my_volume">
            <div>
                28<br />
                文章数量
            </div>
            
                <div>
                    <span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span></span><br />
                    总访问量
                </div>
                <div>
                    <span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv"></span></span><br />
                    访客人数
                </div>
           

        </div>
        <hr>
        <div class="my_name is_appreciation" onclick="is_appreciation()">打赏</div>
        <div id='appreciation'>
             <div class="appreciation">
                <div>
                <a href="http://blogthuol.thuolm.com/appreciation.png?imageView2/2/w/600/q/80" target="_blank" title="请我喝杯咖啡吧(^_^)" class="fancybox" rel="article0 noopener">
                    <img src="http://blogthuol.thuolm.com/appreciation.png?imageView2/2/w/300/q/80" alt="打赏">
                </a>
                </div>
             </div>
             <div class="my_email">请我喝杯咖啡吧(^_^)</div>
         </div>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/13/20200413_Docker%20Nginx%20php%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">Docker Nginx php开发环境</a>
          </li>
        
          <li>
            <a href="/2020/04/08/20200408_docker%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/">docker基本操作命令</a>
          </li>
        
          <li>
            <a href="/2019/08/22/20190822_%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89NPM%E6%9C%8D%E5%8A%A1%EF%BC%88cnpm%EF%BC%89/">搭建私有NPM服务（cnpm）</a>
          </li>
        
          <li>
            <a href="/2017/09/01/20170901_MAC%E8%AF%BB%E5%86%99NTFS%E6%A0%BC%E5%BC%8F%E6%96%87%E4%BB%B6%EF%BC%88%E5%8E%9F%E7%94%9F%E8%AF%BB%E5%86%99%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BB%BB%E4%BD%95%E8%BD%AF%E4%BB%B6%EF%BC%89/">MAC读写NTFS格式文件（原生读写，不需要任何软件）</a>
          </li>
        
          <li>
            <a href="/2017/09/01/20170901_Mac%20%E5%BC%80%E5%90%AF%E5%85%81%E8%AE%B8%E4%BB%BB%E4%BD%95%E6%9D%A5%E6%BA%90%E5%AE%89%E8%A3%85%E5%BA%94%E7%94%A8%EF%BC%88%E5%AE%89%E8%A3%85%E5%8C%85%E6%8D%9F%E5%9D%8F%E9%97%AE%E9%A2%98%EF%BC%89/">Mac 开启允许任何来源安装应用（安装包损坏问题）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MAC/">MAC</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a><span class="category-list-count">16</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux%E5%9F%BA%E7%A1%80/" rel="tag">linux基础</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">2020年04月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">2019年08月</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">2017年09月</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">2017年05月</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">2017年04月</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">2017年03月</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">2017年02月</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      Copyright &copy; 2020-2020 00天火00<br>
      技术支持：
        <a href="https://hexo.io/zh-cn/" target="_blank">Hexo</a> |
        <a href="https://github.com/" target="_blank">GitHub</a> |
        <a href="https://www.qiniu.com/" target="_blank">七牛云</a> |
        <a href="https://www.jianshu.com/" target="_blank">简书</a> |
        <a href="http://busuanzi.ibruce.info/" target="_blank">不蒜子</a>|
        <script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1278740016&web_id=1278740016"></script>
        感谢他们提供相关技术

    </div>
  </div>

</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">主页</a>
  
    <a href="/archives" class="mobile-nav-link">文章</a>
  
    <a href="/explain" class="mobile-nav-link">说明</a>
  
    <a href="/photo" class="mobile-nav-link">摄影</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
</nav>
    

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>